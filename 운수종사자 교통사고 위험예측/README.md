# 운수종사자 교통사고 위험군 예측 프로젝트

운수종사자 검사 데이터(A/B검사)를 기반으로 교통사고 위험군을 예측하는 분류 모델 개발 프로젝트
제공된 대규모 A/B 검사 데이터를 기반으로 다양한 반응·정확도·반응시간 기반 피처를 생성하고,
A/B 검사 데이터를 분리 모델링하여 교통사고 위험군(0/1)을 예측하는 것을 목표로 진행되었습니다.

## 주요 컬럼

- 컬럼명         설명
- Test_id	      검사 식별 ID
- Test	        검사 종류 (A: 신규자격 / B: 자격유지)
- PrimaryKey	  운수종사자 식별 ID
- Age	          나이 구간 (ex. 30a = 30 ~ 34, 30b = 35 ~ 39)
- TestDate	    검사 년월(yyyymm)
- Label	        사고 위험군 여부 (0/1)

## 프로젝트 전체 프로세스

- 데이터 로드 & 기본 구조 확인
- A/B 검사별 구조 차이 분석
- 항목별 카운트/정확도/반응률/반응시간 feature 설계
- A/B 데이터를 분리하여 각각 모델 학습
- 모델 평가 (AUC, Brier, ECE)
- 최종 submit.zip 구성 후 제출 자동화

## Feature Engineering (핵심)

본 프로젝트의 핵심은 각 검사 항목에서 제공되는 값들을
(1) 카운트 기반 변수,
(2) 정확도 기반 변수,
(3) 반응률 변수,
(4) 반응시간 분류 변수
로 정리해 정형화된 피처 세트를 만드는 것입니다.

특히 반응시간은 전체 분포를 기준으로
상위 25% (느림 그룹)
중간 50%
하위 25% (빠른 그룹)
으로 나누어 반응 특성을 모델에 반영했습니다.

## A 검사 (신규 자격검사) Feature Summary

A 검사는 항목 종류가 많고 패턴이 복잡하기 때문에
각 항목을 카운트 / 정확도 / 반응률 / 반응시간 그룹화 형태로 구성했습니다.

response 피쳐만 고려
Count로 변수를 만들기때문에 condition 변수들의 각 환경에서의 값이 의미가 없어짐
condition 변수 제거하고 진행

### 1) 터널 끝 지점 맞추기
이동경로 분포 (좌/우)
이동속도 패턴 카운트
반응 여부 비율(0=반응,1=미반응)
반응시간 → 75% / 25% 기준 3단계 그룹화

### 2) 적색선 위 정지 (속도 반영)
속도 단계별 카운트
반응률
반응시간 그룹화

### 3) 화면 화살표 방향 반응
화살표 크기/위치/방향 카운트
정답/오답 정확도 변수
반응률
반응시간 그룹화

### 4) 원 색깔 구분
색상 매칭 여부
색상 카테고리
정확도
반응률
반응시간 그룹화

### 5) 그림판 BEFORE–AFTER 비교
변화 유형 (변화 없음, 위치, 색상, 모양)
정확도
반응률

### A 검사 특성 요약
항목 수가 많아 다차원 행동 반응 패턴을 세밀히 반영
반응시간 및 반응률이 사고 위험군 구분에 핵심적 역할

## B 검사 (자격 유지검사) Feature Summary

B 검사는 A보다 구조가 단순하며
정확도 / 반응률 / 반응시간 그룹화만으로 대부분 정리 가능했습니다.

### 1) 화면 시야 자극 찾기
정확도
반응시간(Q2~Q3 범위 기반)
변화 정확도

### 2) 시야 자극 찾기 2단계
정확도
반응시간(0값 제거 후 분포 기반)
변화 정확도

### 3) 위험신호 → 즉시 브레이크
정확도
반응시간 그룹화

### 4) 화살표 방향과 동일한 버튼 누르기
일치 여부별 정확도
반응시간 그룹화

### 5~8) 도로 찾기 / 특정 지역 찾기 / 특정 차량 찾기
각 항목별 정확도만 단일 변수로 처리

### B 검사 특성 요약
단순하지만 반응 정확도 위주의 선형적 피처 구조
반응시간은 일부 항목에서 0값 제거 후 재산정 필요

## Feature Selection

- Label(0/1) 두 그룹 간 Cohen’s d가 낮은 변수 제거
- 다른 변수들과 상관도 낮은 변수 제거
→ 정보 공유가 거의 없는 요소를 제거하여 과적합 방지

## 모델링 전략
모델을 A/B로 분리 학습
A와 B는 문항 구조 / 반응 패턴 / 변수의 의미 자체가 완전히 다르기 때문에
단일 모델로 합쳐 학습하면 성능이 저하될 수 있음을 고려.

따라서 다음처럼 분리:
ㅣ 데이터	  ㅣ  사용 모델 
ㅣ A 검사	  ㅣ  모델 A  
ㅣ B 검사	  ㅣ  모델 B

## 평가 지표

| Metric          | 의미                 | 방향           |
| --------------- | -------------------- | -------------- |
| **AUC**         | 사고 위험군 구분 능력  | ↑ 높을수록 좋음 |
| **Brier Score** | 예측 확률의 오차      | ↓ 낮을수록 좋음 |
| **ECE**         | 예측 신뢰도 보정 정도  | ↓ 낮을수록 좋음 |

- 최종 점수 산식
Score = 0.5 × (1 − AUC) + 0.25 × Brier + 0.25 × ECE

