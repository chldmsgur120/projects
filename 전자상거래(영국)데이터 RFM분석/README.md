# 전자상거래 고객 RFM 분석 프로젝트

영국 온라인 전자상거래 데이터를 활용하여  
고객의 **최근성(Recency), 빈도(Frequency), 매출(Monetary)** 기준으로 RFM 분석을 수행하고,  
이를 바탕으로 **고객 세그먼트(클러스터)를 도출**한 프로젝트입니다.

---

## 1. 프로젝트 개요

- **목표**
  - 고객들의 구매 행태를 RFM 지표로 정량화하고,
  - RFM 점수를 기반으로 **고객 세그먼트를 군집화(K-Means)** 하여
  - 마케팅/CRM 전략 수립에 활용 가능한 인사이트를 도출하는 것

- **데이터 출처**(kaggle)
  - 영국 온라인 리테일 전자상거래 데이터 (Invoice, 고객 ID, 구매일자, 수량, 금액 등)

- **주요 산출물**
  - 고객별 RFM 테이블 (`CustomerID`, `Recency`, `Frequency`, `Monetary`)
  - R/F/M 등급(`R_Score`, `F_Score`, `M_Score`)
  - K-Means 기반 세그먼트 라벨(`Cluster`)
  - 최종 RFM+Cluster 데이터(`rfm.csv`) → Power BI에서 시각화/인사이트 도출

---

## 2. RFM 지표 정의

RFM은 고객의 가치를 평가하기 위한 대표적인 고객 행동 분석 기법입니다.

| 지표 | 의미 | 해석 기준 (이 프로젝트에서의 방향성) |
|------|------|--------------------------------------|
| **R (Recency)** | 최근 구매 시점 | 최근에 구매했을수록 더 가치 있는 고객 |
| **F (Frequency)** | 구매 빈도 | 자주 구매할수록 충성 고객 가능성이 높음 |
| **M (Monetary)** | 총 매출 | 더 많은 금액을 지출할수록 우수 고객 |

이 프로젝트에서는 다음 기준으로 산출했습니다.

- **Recency**
  - 기준일(reference date)로부터 **마지막 구매일까지의 일수** 계산  
  - 값이 작을수록 최근에 구매한 고객

- **Frequency**
  - 고객별 **고유한 주문번호(InvoiceNo) 개수**  
  - 자주 주문할수록 높음

- **Monetary**
  - 고객별 **총 매출액(Quantity × UnitPrice 합계)**

---

## 3. RFM 테이블 생성

1. **고객 단위(Group by CustomerID)**로 집계
2. 고객별로 아래 컬럼을 계산
   - `Recency` : 기준일 - 마지막 구매일(일 단위)
   - `Frequency` : 주문번호(InvoiceNo) 고유 개수
   - `Monetary` : 구매 금액 합계
3. 최종 컬럼 구조:
`CustomerID | Recency | Frequency | Monetary`

이 테이블을 기반으로 이후 등급화와 군집화를 진행하였습니다.

---

## 4. RFM 등급화 (Scoring)

고객 간 비교와 군집화를 용이하게 하기 위해  
R/F/M 값을 각각 점수화하여 직관적으로 해석 가능한 등급 기반 변수를 생성했습니다.

---

### 4-1. Recency 등급 (R_Score)

최근 구매일이 가까울수록 높은 점수  
전체 분포 기준 **5등급(qcut)** 으로 분류

| 점수 | 의미 |
|------|------|
| 5 | 매우 최근 구매 |
| 4 | 최근 구매 |
| 3 | 평균적 |
| 2 | 오래됨 |
| 1 | 매우 오래됨 |

---

### 4-2. Frequency 등급 (F_Score)

구매 빈도를 기준으로 **4단계 구간화(bins)**

#### 구간 예시
- 0 ~ 2회  
- 3 ~ 8회  
- 9 ~ 24회  
- 25회 이상  

| 점수 | 특징 |
|------|------|
| 1 | 매우 드문 구매 |
| 2 | 가끔 구매 |
| 3 | 꾸준한 구매 |
| 4 | 매우 자주 구매하는 핵심 고객 |

---

### 4-3. Monetary 등급 (M_Score)

총 매출 금액 기준 **4단계 구간화**

#### 예시
- 0 ~ 500  
- 500 ~ 2,000  
- 2,000 ~ 10,000  
- 10,000 이상  

| 점수 | 특징 |
|------|------|
| 1 | 저가 고객 |
| 2 | 중간 매출 |
| 3 | 고액 고객 |
| 4 | 매우 높은 매출을 발생시키는 VIP |

---

## 5. RFM 분포 분석 및 시각화

RFM 세 지표의 분포와 관계를 이해하기 위해 다음 분석을 수행했습니다.

### ✔ 히스토그램 & KDE
- Recency / Frequency / Monetary 분포 확인  
- 지표별 왜도 파악 후 등급화 기준 설정에 반영  

### ✔ 상관관계 히트맵
- RFM 간 상관성 시각화  
- Recency는 다른 지표들과 음의 상관 가능성  
- Frequency와 Monetary는 양의 상관성 확인  

---

## 6. K-Means 군집화 (Clustering)

RFM 등급(R_Score, F_Score, M_Score)을 입력으로 사용하여  
고객 세그먼트를 구분하기 위해 K-Means 알고리즘을 적용했습니다.

---

### 6-1. 분석에 사용된 변수
- R_Score  
- F_Score  
- M_Score  

---

### 6-2. 표준화(Standardization)

K-Means는 변수 크기(scale)에 민감하기 때문에  
`StandardScaler`로 점수를 **평균 0, 표준편차 1**로 변환한 뒤 학습을 진행했습니다.

---

### 6-3. 최적 클러스터 수 결정 (Elbow Method)

- k = 2 ~ 9 범위에서 inertia(SSE)를 계산  
- 감소 기울기의 변곡점(엘보우)이 **k ≈ 7**에서 나타남  
- 최종 클러스터 수는 **7개**로 선정  

---

### 6-4. K-Means 모델 적용

- `n_clusters = 7`
- `random_state = 42`

고객별 최종 라벨(0~6)을 부여하였습니다.

#### 완성된 테이블 구조
`CustomerID | Recency | Frequency | Monetary | R_Score | F_Score | M_Score | Cluster`

---

## 7. 결과 저장 및 활용

최종 분석 결과는 `rfm.csv`로 저장되며 Power BI를 통해 시각화했습니다.

### Power BI 시각화 항목
- 클러스터별 고객 수  
- R/F/M 평균값 비교  
- 국가·상품 카테고리별 고객 분포  
- VIP / 충성 고객 / 잠재 성장 고객 / 이탈 위험군 라벨링  

---

## 8. 사용 기술 스택

- **Python**
- **pandas**, **numpy** : 데이터 처리  
- **matplotlib**, **seaborn** : 시각화  
- **scikit-learn**
  - StandardScaler (정규화)
  - KMeans (군집화)
- **Power BI** : 대시보드 구축  

---

## 9. 프로젝트 요약

- 전자상거래 데이터를 기반으로 고객 RFM 분석 수행  
- 고객을 정량적으로 평가 가능한 R/F/M 등급으로 변환  
- K-Means 알고리즘으로 **7개의 고객 세그먼트 도출**  
- Power BI 시각화를 활용해 CRM·마케팅 전략 인사이트 도출  

---


