# 전자상거래 고객 RFM 분석 프로젝트

영국 온라인 전자상거래 데이터를 활용하여  
고객의 **최근성(Recency), 빈도(Frequency), 매출(Monetary)** 기준으로 RFM 분석을 수행하고,  
이를 바탕으로 **고객 세그먼트(클러스터)를 도출**한 프로젝트입니다.

---
## 📑 목차
1. [프로젝트 개요](#1-프로젝트-개요)
2. [RFM 지표 정의](#2-rfm-지표-정의)
3. [RFM 테이블 생성](#3-rfm-테이블-생성)
4. [RFM 등급화 (Scoring)](#4-rfm-등급화-scoring)
   - [Recency 등급 (R_Score)](#4-1-recency-등급-r_score)
   - [Frequency 등급 (F_Score)](#4-2-frequency-등급-f_score)
   - [Monetary 등급 (M_Score)](#4-3-monetary-등급-m_score)
5. [K-Means 군집화 (Clustering)](#6-k-means-군집화-clustering)
   - [분석에 사용된 변수](#6-1-분석에-사용된-변수)
   - [표준화(Standardization)](#6-2-표준화standardization)
   - [최적 클러스터 수 결정 (Elbow Method)](#6-3-최적-클러스터-수-결정-elbow-method)
   - [K-Means 모델 적용](#6-4-k-means-모델-적용)
6. [고객 클러스터 해석 (Cluster Interpretation)](#7-고객-클러스터-해석-cluster-interpretation)
7. [Power BI Dashboard Preview](#-power-bi-dashboard-preview)
8. [전자상거래 데이터 RFM 분석의 한계점 및 개선 방향](#전자상거래-데이터-rfm-분석의-한계점-및-개선-방향)

---

## 1. 프로젝트 개요

- **목표**
  - 고객들의 구매 행태를 RFM 지표로 정량화하고,
  - RFM 점수를 기반으로 **고객 세그먼트를 군집화(K-Means)** 하여
  - 마케팅/CRM 전략 수립에 활용 가능한 인사이트를 도출하는 것

- **데이터 출처**(kaggle)
  - 영국 온라인 리테일 전자상거래 데이터 (Invoice, 고객 ID, 구매일자, 수량, 금액 등)

- **주요 산출물**
  - 고객별 RFM 테이블 (`CustomerID`, `Recency`, `Frequency`, `Monetary`)
  - R/F/M 등급(`R_Score`, `F_Score`, `M_Score`)
  - K-Means 기반 세그먼트 라벨(`Cluster`)
  - 최종 RFM+Cluster 데이터(`rfm.csv`) → Power BI에서 시각화/인사이트 도출

---

## 2. RFM 지표 정의

RFM은 고객의 가치를 평가하기 위한 대표적인 고객 행동 분석 기법입니다.

| 지표 | 의미 | 해석 기준 (이 프로젝트에서의 방향성) |
|------|------|--------------------------------------|
| **R (Recency)** | 최근 구매 시점 | 최근에 구매했을수록 더 가치 있는 고객 |
| **F (Frequency)** | 구매 빈도 | 자주 구매할수록 충성 고객 가능성이 높음 |
| **M (Monetary)** | 총 매출 | 더 많은 금액을 지출할수록 우수 고객 |

---

## 3. RFM 테이블 생성

1. **고객 단위(Group by CustomerID)**로 집계
2. 고객별로 아래 컬럼을 계산
   - `Recency` : 기준일 - 마지막 구매일(일 단위)
   - `Frequency` : 주문번호(InvoiceNo) 고유 개수
   - `Monetary` : 구매 금액 합계
3. 최종 컬럼 구조:
`CustomerID | Recency | Frequency | Monetary`

이 테이블을 기반으로 이후 등급화와 군집화를 진행하였습니다.

---

## 4. RFM 등급화 (Scoring)

고객 간 비교와 군집화를 용이하게 하기 위해  
R/F/M 값을 각각 점수화하여 직관적으로 해석 가능한 등급 기반 변수를 생성했습니다.

각 RFM 분포를 보면서 비교적 완만하면 세분화 필요, 극단적일수록 단순화 필요해보임
- Recency	오른쪽 꼬리, 완만함
-> 5등급화

- Frequency	극단적 오른쪽 꼬리
-> 4등급화

- Monetary	극단적 오른쪽 꼬리
-> 4등급화

---

### 4-1. Recency 등급 (R_Score)

| 점수 | 의미 |
|------|------|
| 5 | 매우 최근 구매 |
| 4 | 최근 구매 |
| 3 | 평균적 |
| 2 | 오래됨 |
| 1 | 매우 오래됨 |

---

### 4-2. Frequency 등급 (F_Score)

매우 드문 구매, 가끔 이용, 평균 한달에 2번은 이용, 충성 고객으로 구간화

#### 구간
- 0 ~ 2회  
- 3 ~ 8회  
- 9 ~ 24회  
- 25회 이상  

| 점수 | 특징 |
|------|------|
| 1 | 매우 드문 구매 |
| 2 | 가끔 구매 |
| 3 | 꾸준한 구매 |
| 4 | 매우 자주 구매하는 핵심 고객 |

---

### 4-3. Monetary 등급 (M_Score)

소액/보통/고액/VIP로 구간화

#### 구간
- 0 ~ 500  
- 500 ~ 2,000  
- 2,000 ~ 10,000  
- 10,000 이상  

| 점수 | 특징 |
|------|------|
| 1 | 저가 고객 |
| 2 | 중간 매출 |
| 3 | 고액 고객 |
| 4 | 매우 높은 매출을 발생시키는 VIP |

---

## 6. K-Means 군집화 (Clustering)

RFM 등급(R_Score, F_Score, M_Score)을 입력으로 사용하여  
고객 세그먼트를 구분하기 위해 K-Means 알고리즘을 적용했습니다.

---

### 6-1. 분석에 사용된 변수
- R_Score  
- F_Score  
- M_Score  

---

### 6-2. 표준화(Standardization)

K-Means는 변수 크기(scale)에 민감하기 때문에  
`StandardScaler`로 점수를 **평균 0, 표준편차 1**로 변환한 뒤 학습을 진행했습니다.

---

### 6-3. 최적 클러스터 수 결정 (Elbow Method)

- k = 2 ~ 9 범위에서 inertia를 계산  
- 감소 기울기의 변곡점(엘보우)이 **k ≈ 7**에서 나타남  
- 최종 클러스터 수는 **7개**로 선정  

---

### 6-4. K-Means 모델 적용

- `n_clusters = 7`
- `random_state = 42`

고객별 최종 라벨(0~6)을 부여하였습니다.

---

## 7. 고객 클러스터 해석 (Cluster Interpretation)

Power BI를 통해 시각화하여 라벨링

### Power BI 시각화 항목
- R/F/M 평균값 비교  
- 클러스터별 고객 수 비율

| 클러스터 | 고객 유형 | 설명 |
|----------|-----------|-------|
| **0** | 이탈 고객 | 복귀 유도 대상 |
| **1** | VIP 고객 | 충성도 유지 전략이 필요 |
| **2** | 우수 구매 고객 | 고가·연관상품 제안 전략 |
| **3** | 신규 단건 고객 | 첫 재구매 유도 필요 |
| **4** | 이탈 위험 고객 | 한정 혜택 프로모션 제안 |
| **5** | 휴면 전환 직전 고객 | 리마케팅 강화 |
| **6** | 우량 성장 고객 | VIP 전환 유도 |

---
## 📊 Power BI Dashboard Preview


![클러스터 선택o](images/cluster_select_o.png)
![클러스터 선택x](images/cluster_select_x.png)

---

## 전자상거래 데이터 RFM 분석의 한계점 및 개선 방향

### 한계점

본 분석에서는 RFM 지표 중  
**Frequency(F)와 Monetary(M)를 구간화하는 과정에서 분석자의 자의적인 기준**이 일부 반영되었다.

- F, M 구간이 고정된 임계값을 기준으로 설정되어
  - 실제 데이터 분포 특성이 충분히 반영되지 못함
- 구간 설정에 따라
  - 고객 등급 및 클러스터 해석 결과가 달라질 수 있는 구조적 한계 존재

### 개선 방향

보다 객관적인 RFM 구간화를 위해  
**데이터 분포 기반의 기준 설정 방식**을 적용하는 것이 바람직하다고 판단된다.

구체적인 개선 방향은 다음과 같다.

- **Frequency(F)**
  - 구매 빈도 히스토그램을 분석하여  
    **빈도가 급격히 감소하는 지점(elbow point)** 을 구간 기준으로 설정
    
- **Monetary(M)**
  - 단순 금액 기준이 아닌  
    고객 누적 매출 기여도 관점에서 분석
  - 예: 상위 고객이 전체 매출의 **상위 20%, 50%, 80%**를 차지하는 지점을 기준으로 구간화


이를 통해  
현재의 규칙 기반 RFM 구간화를  
**매출 기여도와 구매 행태를 반영한 데이터 기반 고객 세분화 모델**로 고도화할 수 있을 것으로 기대된다.



